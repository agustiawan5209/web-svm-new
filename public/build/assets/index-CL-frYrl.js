import{r as o,m as _,j as e,L as H}from"./app-B8YGctXO.js";import{S as B,D as F}from"./delete-confirmation-form-hptruGX9.js";import{I as b}from"./input-error-CsxlQD2v.js";import{B as n}from"./button-BM1BWDmo.js";import{C as M}from"./card-BuwYw8aa.js";import{D as O,a as P,b as A,c as R,d as q}from"./dialog-Dp6YjYFa.js";import{I as V}from"./input-DYZ0kQ36.js";import{L as g}from"./label-BhH6eUgD.js";import{S as z,a as G,b as $,c as J,d as K}from"./select-CW9xsr-m.js";import{T as Q,a as U,b as x,c as d,d as W,e as i}from"./table-CcVoc2ry.js";import{A as X}from"./app-layout-Ddgxt9CF.js";import{L as Y}from"./loader-circle-B8zACiUB.js";import"./proxy-C5QYoeYH.js";import"./index-KwUP8Ayu.js";import"./use-mobile-navigation-B5qfKN1I.js";import"./index-CJMIeYH9.js";import"./check-Ch83j7Ql.js";import"./person-standing-s5_Sf9C7.js";import"./react-icons.esm-yr2sCDxZ.js";import"./chevron-down-KoX1KHqF.js";function Ne({label:k,labelSayuran:Z,listLabelSayuran:m,breadcrumb:u,titlePage:N,can:a}){const S=o.useMemo(()=>u?u.map(s=>({title:s.title,href:s.href})):[],[u]),{data:h,setData:t,post:y,put:v,processing:j,errors:f,reset:D}=_({id:null,label_id:"",sayuran:"",porsi:"",tekstur:"",frekuensi:""}),[c,p]=o.useState(null),C=s=>{s.preventDefault(),c==null?y(route("admin.labelSayuran.store"),{preserveState:!0,onSuccess:()=>{t({id:null,label_id:"",sayuran:"",porsi:"",tekstur:"",frekuensi:""}),r(!1)},onError:l=>{console.error(l)}}):v(route("admin.labelSayuran.update",{labelSayuran:c}),{preserveState:!0,onSuccess:()=>{t({id:null,label_id:"",sayuran:"",porsi:"",tekstur:"",frekuensi:""}),p(null),r(!1)},onError:l=>{console.error(l)}})},[L,r]=o.useState(!1),T=s=>{if(s){const l=m.filter(E=>E.id===s,[]);p(s),l&&t({id:s,label_id:l[0].label_id.toLocaleString(),sayuran:l[0].sayuran,porsi:l[0].porsi,tekstur:l[0].tekstur,frekuensi:l[0].frekuensi}),r(!0)}},I=()=>{r(!1),D(),p(null)},[ee,w]=o.useState(!1);return e.jsxs(X,{breadcrumbs:S,children:[e.jsx(H,{title:N??"Label"}),e.jsx(M,{children:e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h2",{className:"text-lg font-bold md:text-xl",children:"Label Gizi Ibu Hamil"}),e.jsx("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:(a==null?void 0:a.add)&&e.jsx(n,{variant:"default",type:"button",className:"cursor-pointer",onClick:()=>r(!0),children:"Tambah Data"})})]}),e.jsx("div",{className:"overflow-x-auto rounded-sm border",children:e.jsxs(Q,{className:"min-w-full",children:[e.jsx(U,{children:e.jsxs(x,{children:[e.jsx(d,{className:"cursor-pointer",children:"no"}),e.jsx(d,{className:"cursor-pointer",children:"Nama Label"}),e.jsx(d,{className:"cursor-pointer",children:"Penanganan"}),((a==null?void 0:a.delete)||(a==null?void 0:a.edit))&&e.jsx(d,{className:"cursor-pointer",children:"Aksi"})]})}),e.jsx(W,{children:m.length>0?m.map((s,l)=>e.jsxs(x,{children:[e.jsx(i,{children:l+1}),e.jsx(i,{children:s.label.nama}),e.jsx(i,{children:s.tekstur}),((a==null?void 0:a.edit)||(a==null?void 0:a.delete))&&e.jsx(i,{children:e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[(a==null?void 0:a.edit)&&e.jsxs(n,{type:"button",variant:"default",tooltip:"edit",onClick:()=>T(s.id),className:"border border-chart-4 bg-chart-4",children:[" ",e.jsx(B,{})," "]}),(a==null?void 0:a.delete)&&e.jsx(F,{title:`Hapus label ${s.id}`,id:s.id,url:route("admin.labelSayuran.destroy",{labelSayuran:s.id}),setOpenDialog:w})]})})]},s.id)):e.jsx(x,{children:e.jsx(i,{colSpan:7,className:"py-4 text-center",children:"No data found"})})})]})})]})}),e.jsx(O,{open:L,onOpenChange:r,children:e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(R,{children:[c?"Edit":"Tambah"," Rekomendasi Makanan"]})}),e.jsxs("form",{className:"space-y-4",onSubmit:C,children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"sayuran",className:"text-sm font-medium",children:"Pilih Label"}),e.jsxs(z,{value:h.label_id,required:!0,onValueChange:s=>t("label_id",s),children:[e.jsx(G,{className:"w-full",children:e.jsx($,{placeholder:"Select Label"})}),e.jsx(J,{children:k.map((s,l)=>e.jsx(K,{value:s.id.toString(),children:s.nama},l))})]}),e.jsx(b,{message:f.label_id,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"tekstur",className:"text-sm font-medium",children:"Penanganan Makanan"}),e.jsx(V,{type:"text",value:h.tekstur,onChange:s=>t("tekstur",s.target.value),id:"tekstur",name:"tekstur",className:"input",disabled:j,placeholder:"Masukkan tekstur"}),e.jsx(b,{message:f.tekstur,className:"mt-2"})]})]}),e.jsxs(q,{children:[e.jsx(n,{type:"button",variant:"secondary",onClick:()=>I(),children:"Batal"}),e.jsxs(n,{type:"submit",children:[j&&e.jsx(Y,{className:"h-4 w-4 animate-spin"}),"Simpan"]})]})]})]})})]})}export{Ne as default};
