import{r as x,m as I,j as e,L as y}from"./app-BvJTPa4F.js";import{I as d}from"./input-error-CLJW2rfn.js";import{B as C}from"./button-B_C3jsia.js";import{I as u}from"./input-BhlM952y.js";import{L as c}from"./label-BPlB6m5R.js";import{T as w}from"./use-mobile-navigation-BwpiycPh.js";import{A as S}from"./app-layout-Br9h_7Ez.js";import{L}from"./loader-circle-CSHmarIV.js";import"./index-BaqpAR-j.js";import"./proxy-B0oIBWLF.js";import"./index-B9dZ-KWS.js";import"./react-icons.esm-BKo58YvE.js";import"./person-standing-Bd8ReaRt.js";import"./chevron-down-EWV8qnUl.js";function G({breadcrumb:h,pasien:t}){const v=x.useMemo(()=>h?h.map(a=>({title:a.title,href:a.href})):[],[h]),[l,o]=x.useState({title:"",show:!1,message:"",type:"success"}),[p,E]=x.useState(t?t.id:null),{data:i,setData:m,post:b,put:_,processing:s,errors:n}=I({id:(t==null?void 0:t.id)??0,user_id:(t==null?void 0:t.user_id)??"",nik:(t==null?void 0:t.nik)??"",nama:(t==null?void 0:t.nama)??"",tempat_lahir:(t==null?void 0:t.tempat_lahir)??"",tanggal_lahir:(t==null?void 0:t.tanggal_lahir)??"",jenis_kelamin:(t==null?void 0:t.jenis_kelamin)??""}),N=a=>{a.preventDefault(),p?_(route("pasien.update",{pasien:p}),{onSuccess:r=>{o({title:"Success",message:"Data berhasil disimpan",type:"success",show:!0})},onError:r=>{const g=typeof r=="object"?Object.values(r).flat().join(`
`):String(r);o({title:"Error",show:!0,message:g,type:"error"}),console.log(r)}}):b(route("pasien.store"),{onError:r=>{const g=typeof r=="object"?Object.values(r).flat().join(`
`):String(r);o({title:"Error",show:!0,message:g,type:"error"}),console.log(r)}})},j=new Date,f=new Date(j);f.setFullYear(j.getFullYear()-1);const k=f.toISOString().split("T")[0];return e.jsxs(S,{breadcrumbs:v,children:[e.jsx(y,{title:t?"Edit Pasien":"Create Pasien"}),e.jsx(w,{open:l.show,onOpenChange:()=>o(a=>({...a,show:!1})),title:l.title,description:l.message,duration:1e4,variant:l.type}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:N,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"nama",children:"NIK (Nomor Induk Kependudukan)"}),e.jsx(u,{id:"nik",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"nik",value:i.nik,onChange:a=>{const r=a.target.value;/^\d*$/.test(r)&&r.length<=16&&m("nik",a.target.value)},disabled:s,placeholder:"Nomor Induk Kependudukan"}),e.jsx(d,{message:n.nik,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"nama",children:"Nama"}),e.jsx(u,{id:"nama",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"nama",value:i.nama,onChange:a=>m("nama",a.target.value),disabled:s,placeholder:"Nama Pasien"}),e.jsx(d,{message:n.nama,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"col-span-1 grid gap-2",children:[e.jsx(c,{htmlFor:"tempat_lahir",children:"Tempat"}),e.jsx(u,{id:"tempat_lahir",type:"text",required:!0,tabIndex:2,autoComplete:"tempat_lahir",value:i.tempat_lahir,onChange:a=>m("tempat_lahir",a.target.value),disabled:s,placeholder:"tempat_lahir......."}),e.jsx(d,{message:n.tempat_lahir})]}),e.jsxs("div",{className:"col-span-2 grid gap-2",children:[e.jsx(c,{htmlFor:"tanggal_lahir",children:"Tanggal Lahir"}),e.jsx(u,{id:"tanggal_lahir",type:"date",required:!0,max:k,tabIndex:2,autoComplete:"tanggal_lahir",value:i.tanggal_lahir,onChange:a=>m("tanggal_lahir",a.target.value),disabled:s,placeholder:"tanggal lahir......."}),e.jsx(d,{message:n.tanggal_lahir})]})]}),e.jsxs(C,{type:"submit",variant:"default",className:"mt-2 w-full",tabIndex:5,disabled:s,children:[s&&e.jsx(L,{className:"h-4 w-4 animate-spin"}),"Simpan"]})]})})})})})]})}export{G as default};
