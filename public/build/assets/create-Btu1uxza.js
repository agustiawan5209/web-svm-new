import{m as F,r as V,j as a,L as z}from"./app-6zd_bWuL.js";import{F as A}from"./form-loop-kriteria-DfEwMHM9.js";import{I as G}from"./input-error-D_dtP-BE.js";import{B as H}from"./button-0F6j6UJN.js";import{L as M}from"./label-Bt2KfAv7.js";import{S as _,a as q,b as P,c as R,d as $}from"./select-fpHqLaOx.js";import{A as J}from"./app-layout-CVFowHtq.js";import{L as O}from"./loader-circle-Bcvy3bAC.js";import"./input-BpxBLscX.js";import"./index-B0Fjj1EZ.js";import"./index-8GJ9XT80.js";import"./use-mobile-navigation-BmhN4DQS.js";import"./proxy-4SkkH8IV.js";import"./check-Dq3cyPmM.js";import"./person-standing-DIsV2blT.js";import"./react-icons.esm-cYr1q-ST.js";import"./chevron-down-ChoBRkYd.js";function ce({breadcrumb:b,kriteria:n,titlePage:v,opsiLabel:y}){const C=b?b.map(e=>({title:e.title,href:e.href})):[],{data:d,setData:l,post:w,processing:h,errors:j}=F({label:"",kriteria:n.map((e,t)=>({kriteria_id:n[t].id,nilai:null}))}),T=V.useCallback(e=>{console.log(e.target.value);const{name:t,value:s}=e.target,[o,u]=t.split("."),m=Number(u);o==="kriteria"?(s===""||/^-?\d*\.?\d*$/.test(s))&&l(c=>{var I,B,S;const r=(I=c.kriteria)==null?void 0:I.map((i,x)=>x===m?{...i,nilai:s}:i),p=n.findIndex(i=>i.nama.includes("BB")),f=n.findIndex(i=>i.nama.includes("TB")),N=n.findIndex(i=>i.nama.toLowerCase().includes("imt"));if((m===p||m===f)&&N!==-1){const i=Number(m===p?s:((B=r==null?void 0:r[p])==null?void 0:B.nilai)??0),x=Number(m===f?s:((S=r==null?void 0:r[f])==null?void 0:S.nilai)??0);if(i>0&&x>0)return{...c,kriteria:r==null?void 0:r.map((L,E)=>E===N?{...L,nilai:k(i,x)}:L)}}return{...c,kriteria:r}}):l(c=>({...c,[t]:s}))},[n,l]),k=(e,t)=>{const s=t/100;return(e/(s*s)).toFixed(3)},g=(e,t)=>{e&&t!==void 0&&d&&d.kriteria?l(e==="label"?s=>({...s,[e]:t}):s=>({...s,kriteria:s.kriteria.map((o,u)=>u===Number(e)?{...o,nilai:t}:o)})):console.error("Invalid data: name, value, or kriteria may be undefined")},D=e=>{e.preventDefault(),w(route("admin.dataset.store"),{onError:t=>{console.log(t)}})};return a.jsxs(J,{breadcrumbs:C,children:[a.jsx(z,{title:v??"Input Data Gizi Ibu Hamil"}),a.jsxs("div",{className:"mx-auto max-w-7xl rounded-xl border border-gray-100 bg-white p-6 shadow",children:[a.jsx("h1",{className:"mb-6 text-center text-xl font-semibold text-primary",children:"Input Data Gizi Ibu Hamil"}),a.jsxs("form",{onSubmit:D,className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:a.jsxs("div",{children:[a.jsx(M,{className:"text-xs text-gray-600",children:"Label"}),a.jsxs(_,{value:d.label,required:!0,onValueChange:e=>g("label",e),children:[a.jsx(q,{className:"input-minimal",children:a.jsx(P,{placeholder:"Pilih"})}),a.jsx(R,{children:y.map((e,t)=>a.jsx($,{value:e.nama,children:e.nama},t))})]}),j.label&&a.jsx(G,{message:j.label,className:"mt-2"})]})}),a.jsx(A,{kriteria:n,data:d,setData:l,handleChange:T,handleSelectChange:g,processing:h}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(H,{type:"submit",variant:"default",children:[h&&a.jsx(O,{className:"h-4 w-4 animate-spin"}),"Simpan Data"]})})]})]})]})}export{ce as default};
